<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Dashboard - Remo</title>
    <link rel="stylesheet" href="dashboard.css">
</head>
<body>

<script>
    // BLOQUEIA ACESSO SEM LOGIN
    const token = localStorage.getItem("token");
    if (!token) {
        window.location.href = "/login.html";
    }

    // PEGAR DADOS DO USU√ÅRIO
    const usuario = JSON.parse(localStorage.getItem("user") || "{}");
</script>

<div class="layout">
    <!-- SIDEBAR PADR√ÉO REMO -->
    <aside class="sidebar">
        <img src="/logosfundo.png" class="logo" alt="Remo Logo">

        <ul>
            <li><a href="/dashboard.html" class="active">üè† Dashboard</a></li>
            <li><a href="/clientes/index.html">üë• Clientes</a></li>
            <li><a href="/emprestimos/index.html">üí∞ Empr√©stimos</a></li>
            <li><a href="/pagamentos/index.html">üìÑ Pagamentos</a></li>
            <li><a href="/relatorios/index.html">üìä Relat√≥rios</a></li>
            <li><a href="/juros/index.html">üìà Tabela de Juros</a></li>
            <li><a href="/solicitacoes/index.html">üì¨ Solicita√ß√µes</a></li>
        </ul>
    </aside>

    <!-- CONTE√öDO PRINCIPAL -->
    <main class="content">
        <div class="container-card">
            <div class="header">
                <div>
                    <h1>Dashboard</h1>
                    <p class="subtitle">Vis√£o geral dos seus clientes, empr√©stimos e recebimentos.</p>
                </div>

                <div class="header-right">
                    <span id="nome-usuario" class="welcome"></span>
                    <button id="btnLogout" class="btn-secondary btn-logout" onclick="logout()">Sair</button>
                </div>
            </div>

            <!-- CARDS RESUMO -->
            <div class="cards-grid">
                <div class="card">
                    <span class="card-label">Clientes</span>
                    <span class="card-value" id="qtdClientes">0</span>
                </div>

                <div class="card">
                    <span class="card-label">Empr√©stimos Ativos</span>
                    <span class="card-value" id="qtdEmprestimos">0</span>
                </div>

                <div class="card">
                    <span class="card-label">Pagamentos Pendentes</span>
                    <span class="card-value" id="qtdPendentes">0</span>
                </div>
            </div>

            <!-- FUTURO: gr√°ficos, lista de atrasados etc. -->
        </div>
    </main>
</div>

<script>
    // Preenche nome do usu√°rio
    const spanUsuario = document.getElementById("nome-usuario");
    if (usuario && usuario.nome) {
        spanUsuario.innerText = "Ol√°, " + usuario.nome;
    } else {
        spanUsuario.innerText = "Ol√°!";
    }

    // LOGOUT
    function logout() {
        localStorage.removeItem("token");
        localStorage.removeItem("user");
        window.location.href = "/login.html";
    }

    // FUTURAMENTE AQUI VAI TER: fetch /api/dashboard/resumo
    // Exemplo:
    // authFetch('/api/dashboard/resumo').then(...)

</script>

</body>
</html>
